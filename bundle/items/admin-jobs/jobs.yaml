removeStrategy:
  rbac: SYNC
  items: NONE
items:
- kind: folder
  name: admin-jobs
  properties:
  - itemRestrictions:
      allowedTypes:
      - org.jenkinsci.plugins.workflow.job.WorkflowJob
      - org.jenkinsci.plugins.workflow.multibranch.WorkflowMultiBranchProject
      - workshop-catalog/casc-bundle
      filter: true
  - folderCredentialsProperty:
      folderCredentials:
      - credentials:
        - usernamePassword:
            id: api-token
            description: controller admin api token
            username: ${GITHUB_USER}-admin
            password: '${userApiToken}'
            usernameSecret: false
        - string:
            description: "CasC Update Secret"
            id: "casc-update-secret"
            secret: "${cbciCascWorkshopControllerProvisionSecret}"
  items:
  - kind: cloudbeesTemplatedJob
    name: update-casc-bundle
    catalog: workshop-catalog
    model: casc-bundle
    attributes:
    - value: ${GITHUB_ORGANIZATION}
      key: repoOwner
    - value: update-casc-bundle
      key: name
    - value: controller
      key: repository
    - value: cloudbees-ci-previews-demo-github-app
      key: githubCredentialId
